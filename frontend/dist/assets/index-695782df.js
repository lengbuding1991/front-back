import{r as e,a as t,o as r,c as s,w as o,T as a,b as n,d as i,n as l,e as c,t as d,F as u,f as h,g,h as f,i as p,j as m,v as y,k as b,l as x,m as w,p as v,q as k}from"./vendor-70d4b779.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const C=(e,t)=>{const r=e.__vccOpts||e;for(const[s,o]of t)r[s]=o;return r},S={class:"flex items-start"},I={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},E={key:1,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},L={key:2,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},T={key:3,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},O={class:"ml-3 flex-1"},M={class:"text-sm font-medium"},R={key:0,class:"mt-1 text-sm opacity-90"},A=C({__name:"Toast",setup(u,{expose:h}){const g=e(!1),f=e(""),p=e(""),m=e("info"),y=e(4e3),b=t({success:"bg-green-50 border-green-400 text-green-800",error:"bg-red-50 border-red-400 text-red-800",warning:"bg-yellow-50 border-yellow-400 text-yellow-800",info:"bg-blue-50 border-blue-400 text-blue-800"}),x=t({success:"text-green-400",error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"}),w=()=>{g.value=!1};return h({show:e=>{f.value=e.title||"",p.value=e.message||"",m.value=e.type||"info",y.value=e.timeout||4e3,g.value=!0,y.value>0&&setTimeout(()=>{w()},y.value)},hide:w}),(e,t)=>(r(),s(a,{name:"toast"},{default:o(()=>[g.value?(r(),n("div",{key:0,class:l(["fixed top-4 right-4 z-50 max-w-sm w-full p-4 rounded-lg shadow-lg border-l-4",b[m.value]]),role:"alert"},[i("div",S,[i("div",{class:l(["flex-shrink-0",x[m.value]])},["success"===m.value?(r(),n("svg",I,[...t[0]||(t[0]=[i("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):c("",!0),"error"===m.value?(r(),n("svg",E,[...t[1]||(t[1]=[i("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)])])):c("",!0),"warning"===m.value?(r(),n("svg",L,[...t[2]||(t[2]=[i("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)])])):c("",!0),"info"===m.value?(r(),n("svg",T,[...t[3]||(t[3]=[i("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])])):c("",!0)],2),i("div",O,[i("p",M,d(f.value),1),p.value?(r(),n("p",R,d(p.value),1)):c("",!0)]),i("button",{onClick:w,class:"ml-4 flex-shrink-0 inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600 transition-colors"},[...t[4]||(t[4]=[i("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[i("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])],2)):c("",!0)]),_:1}))}},[["__scopeId","data-v-79ad5b5c"]]),j={name:"Sidebar",props:{isSidebarCollapsed:{type:Boolean,default:!1},isLoggedIn:{type:Boolean,default:!1},userInfo:{type:Object,default:()=>({username:"",email:"",avatar:""})},showUserDropdown:{type:Boolean,default:!1},isDarkMode:{type:Boolean,default:!1},recentChats:{type:Array,default:()=>[]},selectedChatId:{type:Number,default:1},pagination:{type:Object,default:()=>({currentPage:1,pageSize:10,totalChats:0,hasMore:!1,isLoading:!1})}},emits:["toggle-sidebar","new-chat","select-chat","delete-chat","open-login-modal","toggle-user-dropdown","show-settings","show-help","toggle-theme","logout","refresh-chats","load-more-chats"]},_={class:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},F={key:0,class:"flex items-center space-x-2"},U={class:"flex-1 overflow-y-auto scrollbar-hide p-2"},D={class:"mb-4"},P={key:0},N={key:0,class:"space-y-1"},$={class:"flex items-center justify-between mb-2 px-3"},B=["onClick"],q={class:"flex-1 min-w-0"},z={class:"text-sm font-medium truncate"},H={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},K=["onClick"],J={key:0,class:"mt-2"},W=["disabled"],V={key:0,class:"fas fa-spinner fa-spin"},X={key:1},Q={class:"p-3 border-t border-gray-200 dark:border-gray-700"},G={class:"relative"},Z={key:0,class:"flex items-center justify-center"},Y={key:0},ee={key:1},te=["src"],re={key:0,class:"flex-1 min-w-0"},se={class:"text-sm font-medium truncate text-gray-800 dark:text-white"},oe={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},ae={key:0,class:"absolute bottom-full left-0 right-0 mb-2 bg-white dark:bg-dark-card rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-10"},ne={class:"text-sm"};const ie=C(j,[["render",function(e,t,s,o,a,f){var p,m,y;return r(),n("aside",{class:l(["bg-white dark:bg-dark-card border-r border-gray-200 dark:border-gray-700 flex flex-col transition-all duration-300 ease-in-out z-20",s.isSidebarCollapsed?"w-16":"w-64"])},[i("div",_,[s.isSidebarCollapsed?c("",!0):(r(),n("div",F,[...t[10]||(t[10]=[i("div",{class:"w-8 h-8 rounded-md bg-primary flex items-center justify-center"},[i("i",{class:"fas fa-brain text-white text-lg"})],-1),i("h1",{class:"text-xl font-bold text-primary"},"DeepSeek",-1)])])),i("button",{onClick:t[0]||(t[0]=t=>e.$emit("toggle-sidebar")),class:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-dark-hover transition-bg"},[i("i",{class:l(["fas text-gray-500 dark:text-gray-400",s.isSidebarCollapsed?"fa-bars":"fa-chevron-left"])},null,2)])]),i("div",U,[i("div",D,[i("button",{onClick:t[1]||(t[1]=t=>e.$emit("new-chat")),class:"w-full flex items-center justify-center space-x-2 bg-primary/10 hover:bg-primary/20 text-primary py-2.5 px-4 rounded-lg transition-bg font-medium"},[t[11]||(t[11]=i("i",{class:"fas fa-plus"},null,-1)),s.isSidebarCollapsed?c("",!0):(r(),n("span",P,"新对话"))])]),s.isSidebarCollapsed?c("",!0):(r(),n("div",N,[i("div",$,[t[13]||(t[13]=i("div",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," 最近对话 ",-1)),i("button",{onClick:t[2]||(t[2]=t=>e.$emit("refresh-chats")),class:"text-xs text-gray-500 hover:text-primary dark:text-gray-400 dark:hover:text-primary transition-colors",title:"刷新对话列表"},[...t[12]||(t[12]=[i("i",{class:"fas fa-sync-alt"},null,-1)])])]),(r(!0),n(u,null,h(s.recentChats,o=>(r(),n("div",{key:o.id,onClick:t=>e.$emit("select-chat",o.id),class:l(["chat-item flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-hover transition-bg cursor-pointer",{"bg-gray-100 dark:bg-dark-hover":s.selectedChatId===o.id}])},[i("div",{class:l(`w-8 h-8 rounded-md ${o.color} flex items-center justify-center flex-shrink-0`)},[i("i",{class:l(`fas fa-comment ${o.iconColor}`)},null,2)],2),i("div",q,[i("p",z,d(o.title),1),i("p",H,d(o.time),1)]),i("button",{onClick:g(t=>e.$emit("delete-chat",o.id),["stop"]),class:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-1 opacity-0 hover:opacity-100 transition-opacity",title:"删除对话"},[...t[14]||(t[14]=[i("i",{class:"fas fa-trash-alt"},null,-1)])],8,K)],10,B))),128)),s.pagination.hasMore&&!s.isSidebarCollapsed?(r(),n("div",J,[i("button",{onClick:t[3]||(t[3]=t=>e.$emit("load-more-chats")),disabled:s.pagination.isLoading,class:l(["w-full flex items-center justify-center space-x-2 py-2 px-4 rounded-lg transition-bg font-medium",s.pagination.isLoading?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200 text-gray-700 dark:bg-dark-hover dark:hover:bg-dark-card dark:text-gray-300"])},[s.pagination.isLoading?(r(),n("i",V)):(r(),n("span",X,"加载更多"))],10,W)])):c("",!0)]))]),i("div",Q,[i("div",G,[s.isLoggedIn?(r(),n("div",ee,[i("div",{onClick:t[5]||(t[5]=t=>e.$emit("toggle-user-dropdown")),class:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-hover transition-bg cursor-pointer"},[i("img",{src:(null==(p=s.userInfo)?void 0:p.avatar)||"https://design.gemcoder.com/staticResource/echoAiSystemImages/3af53b10252ba2331a996da3c32fd378.png",alt:"用户头像",class:"w-8 h-8 rounded-full object-cover"},null,8,te),s.isSidebarCollapsed?c("",!0):(r(),n("div",re,[i("p",se,d((null==(m=s.userInfo)?void 0:m.username)||"用户"),1),i("p",oe,d((null==(y=s.userInfo)?void 0:y.plan)||"个人版"),1)])),t[16]||(t[16]=i("i",{class:"fas fa-chevron-down text-xs text-gray-500 dark:text-gray-400"},null,-1))]),s.showUserDropdown?(r(),n("div",ae,[i("button",{onClick:t[6]||(t[6]=t=>e.$emit("show-settings")),class:"w-full flex items-center space-x-3 p-2 hover:bg-gray-100 dark:hover:bg-dark-hover transition-bg text-left"},[...t[17]||(t[17]=[i("i",{class:"fas fa-cog text-gray-500 dark:text-gray-400 w-5 text-center"},null,-1),i("span",{class:"text-sm"},"设置",-1)])]),i("button",{onClick:t[7]||(t[7]=t=>e.$emit("show-help")),class:"w-full flex items-center space-x-3 p-2 hover:bg-gray-100 dark:hover:bg-dark-hover transition-bg text-left"},[...t[18]||(t[18]=[i("i",{class:"fas fa-question-circle text-gray-500 dark:text-gray-400 w-5 text-center"},null,-1),i("span",{class:"text-sm"},"帮助与反馈",-1)])]),t[20]||(t[20]=i("div",{class:"border-t border-gray-200 dark:border-gray-700 my-1"},null,-1)),i("button",{onClick:t[8]||(t[8]=t=>e.$emit("toggle-theme")),class:"w-full flex items-center space-x-3 p-2 hover:bg-gray-100 dark:hover:bg-dark-hover transition-bg text-left"},[i("i",{class:l([s.isDarkMode?"fas fa-sun":"fas fa-moon","text-gray-500 dark:text-gray-400 w-5 text-center"])},null,2),i("span",ne,d(s.isDarkMode?"浅色模式":"深色模式"),1)]),t[21]||(t[21]=i("div",{class:"border-t border-gray-200 dark:border-gray-700 my-1"},null,-1)),i("button",{onClick:t[9]||(t[9]=t=>e.$emit("logout")),class:"w-full flex items-center space-x-3 p-2 hover:bg-gray-100 dark:hover:bg-dark-hover transition-bg text-left"},[...t[19]||(t[19]=[i("i",{class:"fas fa-sign-out-alt text-gray-500 dark:text-gray-400 w-5 text-center"},null,-1),i("span",{class:"text-sm"},"退出登录",-1)])])])):c("",!0)])):(r(),n("div",Z,[i("button",{onClick:t[4]||(t[4]=t=>e.$emit("open-login-modal")),class:"w-full flex items-center justify-center space-x-2 bg-primary hover:bg-primary/90 text-white py-2.5 px-4 rounded-lg transition-bg font-medium"},[t[15]||(t[15]=i("i",{class:"fas fa-sign-in-alt"},null,-1)),s.isSidebarCollapsed?c("",!0):(r(),n("span",Y,"登录"))])]))])])],2)}]]),le={name:"ChatArea",props:{currentChatId:{type:String,default:null},messages:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},inputMessage:{type:String,default:""},userInfo:{type:Object,default:()=>({username:"",email:"",avatar:""})},isDarkMode:{type:Boolean,default:!1},isLoggedIn:{type:Boolean,default:!1}},data(){return{textareaHeight:52,localInputMessage:this.inputMessage,suggestions:[{id:1,title:"代码助手",description:"帮我编写和优化代码",icon:"fas fa-code",prompt:"请帮我编写一个Python函数，实现..."},{id:2,title:"内容创作",description:"帮我写文章、邮件等",icon:"fas fa-edit",prompt:"请帮我写一封工作邮件，内容是..."},{id:3,title:"学习助手",description:"解答问题和解释概念",icon:"fas fa-graduation-cap",prompt:"请解释一下什么是机器学习..."}]}},methods:{formatTime:e=>new Date(e).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),handleKeydown(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.localInputMessage.trim()&&this.sendMessage())},autoResize(){this.$nextTick(()=>{const e=this.$refs.messageInput;if(e){e.style.height="auto";const t=Math.min(e.scrollHeight,200);this.textareaHeight=Math.max(t,52)}})},sendMessage(){this.isLoggedIn?this.localInputMessage.trim()&&(this.$emit("send-message",this.localInputMessage),this.localInputMessage=""):this.$emit("show-login")},clearInput(){this.localInputMessage="",this.$emit("clear-input")},updateLocalInputMessage(e){this.localInputMessage=e.target.value,this.autoResize(),this.$emit("update:input-message",e.target.value)}},watch:{inputMessage(e){this.localInputMessage=e}},emits:["toggle-sidebar","toggle-theme","show-settings","show-help","quick-start","send-message","copy-message","regenerate-message","clear-input","upload-file","update:input-message"]},ce={class:"flex-1 flex flex-col bg-gray-50 dark:bg-dark-bg"},de={class:"bg-white dark:bg-dark-card border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between"},ue={class:"flex items-center space-x-4"},he={class:"flex items-center space-x-3"},ge=["title"],fe={class:"flex-1 overflow-hidden flex flex-col"},pe={key:0,class:"flex-1 flex items-center justify-center p-8"},me={class:"text-center max-w-2xl"},ye={key:0,class:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6 mb-8"},be={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},xe=["onClick"],we={class:"w-10 h-10 rounded-md bg-primary/10 flex items-center justify-center mb-3"},ve={class:"font-semibold text-gray-800 dark:text-white mb-2"},ke={class:"text-sm text-gray-600 dark:text-gray-300"},Ce={key:1,class:"flex-1 overflow-y-auto scrollbar-hide"},Se={class:"max-w-4xl mx-auto px-4 py-6"},Ie={key:0,class:"flex justify-end mb-4"},Ee={class:"flex items-start space-x-3 max-w-3xl"},Le={class:"flex-1"},Te={class:"bg-primary text-white rounded-2xl rounded-tr-none px-4 py-3 shadow-sm"},Oe={class:"text-sm whitespace-pre-wrap"},Me={class:"flex items-center justify-end space-x-2 mt-1"},Re={class:"text-xs text-gray-500 dark:text-gray-400"},Ae=["onClick"],je=["src"],_e={key:1,class:"flex justify-start mb-4"},Fe={class:"flex items-start space-x-3 max-w-3xl"},Ue={class:"flex-1"},De={class:"bg-white dark:bg-dark-card border border-gray-200 dark:border-gray-700 rounded-2xl rounded-tl-none px-4 py-3 shadow-sm"},Pe={class:"text-sm text-gray-800 dark:text-white whitespace-pre-wrap"},Ne={class:"flex items-center space-x-2 mt-1"},$e={class:"text-xs text-gray-500 dark:text-gray-400"},Be=["onClick"],qe=["onClick"],ze={key:0,class:"flex justify-start mb-4"},He={class:"border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-dark-card p-4"},Ke={class:"max-w-4xl mx-auto"},Je={key:0,class:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-4"},We={class:"flex items-end space-x-3"},Ve={class:"flex-1 relative"},Xe=["value","placeholder","disabled"],Qe={class:"absolute right-3 bottom-3 flex items-center space-x-2"},Ge=["disabled"],Ze=["disabled","title"],Ye={key:1,class:"flex items-center justify-between mt-3 text-xs text-gray-500 dark:text-gray-400"},et={class:"flex items-center space-x-2"};const tt=C(le,[["render",function(e,t,s,o,a,g){return r(),n("main",ce,[i("div",de,[i("div",ue,[i("button",{onClick:t[0]||(t[0]=t=>e.$emit("toggle-sidebar")),class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-hover transition-bg"},[...t[9]||(t[9]=[i("i",{class:"fas fa-bars text-gray-500 dark:text-gray-400"},null,-1)])]),t[10]||(t[10]=i("div",{class:"flex items-center space-x-2"},[i("div",{class:"w-8 h-8 rounded-md bg-primary flex items-center justify-center"},[i("i",{class:"fas fa-brain text-white text-lg"})]),i("h1",{class:"text-xl font-bold text-primary"},"DeepSeek")],-1))]),i("div",he,[i("button",{onClick:t[1]||(t[1]=t=>e.$emit("toggle-theme")),class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-hover transition-bg",title:s.isDarkMode?"切换到浅色模式":"切换到深色模式"},[i("i",{class:l([s.isDarkMode?"fas fa-sun":"fas fa-moon","text-gray-500 dark:text-gray-400"])},null,2)],8,ge),i("button",{onClick:t[2]||(t[2]=t=>e.$emit("show-settings")),class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-hover transition-bg",title:"设置"},[...t[11]||(t[11]=[i("i",{class:"fas fa-cog text-gray-500 dark:text-gray-400"},null,-1)])]),i("button",{onClick:t[3]||(t[3]=t=>e.$emit("show-help")),class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-hover transition-bg",title:"帮助与反馈"},[...t[12]||(t[12]=[i("i",{class:"fas fa-question-circle text-gray-500 dark:text-gray-400"},null,-1)])])])]),i("div",fe,[s.currentChatId?(r(),n("div",Ce,[i("div",Se,[(r(!0),n(u,null,h(s.messages,o=>{var a;return r(),n("div",{key:o.id,class:"mb-6"},["user"===o.role?(r(),n("div",Ie,[i("div",Ee,[i("div",Le,[i("div",Te,[i("p",Oe,d(o.content),1)]),i("div",Me,[i("span",Re,d(g.formatTime(o.timestamp)),1),i("button",{onClick:t=>e.$emit("copy-message",o.content),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"复制消息"},[...t[17]||(t[17]=[i("i",{class:"fas fa-copy text-xs"},null,-1)])],8,Ae)])]),i("img",{src:(null==(a=s.userInfo)?void 0:a.avatar)||"https://design.gemcoder.com/staticResource/echoAiSystemImages/3af53b10252ba2331a996da3c32fd378.png",alt:"用户头像",class:"w-8 h-8 rounded-full object-cover"},null,8,je)])])):(r(),n("div",_e,[i("div",Fe,[t[20]||(t[20]=i("div",{class:"w-8 h-8 rounded-md bg-primary flex items-center justify-center flex-shrink-0"},[i("i",{class:"fas fa-brain text-white text-sm"})],-1)),i("div",Ue,[i("div",De,[i("p",Pe,d(o.content),1)]),i("div",Ne,[i("span",$e,d(g.formatTime(o.timestamp)),1),i("button",{onClick:t=>e.$emit("copy-message",o.content),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"复制消息"},[...t[18]||(t[18]=[i("i",{class:"fas fa-copy text-xs"},null,-1)])],8,Be),i("button",{onClick:t=>e.$emit("regenerate-message",o.id),class:"text-gray-400 hover:text-primary transition-colors",title:"重新生成"},[...t[19]||(t[19]=[i("i",{class:"fas fa-redo text-xs"},null,-1)])],8,qe)])])])]))])}),128)),s.isLoading?(r(),n("div",ze,[...t[21]||(t[21]=[f('<div class="flex items-start space-x-3 max-w-3xl"><div class="w-8 h-8 rounded-md bg-primary flex items-center justify-center flex-shrink-0"><i class="fas fa-brain text-white text-sm"></i></div><div class="bg-white dark:bg-dark-card border border-gray-200 dark:border-gray-700 rounded-2xl rounded-tl-none px-4 py-3 shadow-sm"><div class="flex items-center space-x-2"><div class="flex space-x-1"><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0.1s;"></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0.2s;"></div></div><span class="text-sm text-gray-600 dark:text-gray-300">AI正在思考中...</span></div></div></div>',1)])])):c("",!0)])])):(r(),n("div",pe,[i("div",me,[t[14]||(t[14]=i("div",{class:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-6"},[i("i",{class:"fas fa-brain text-primary text-3xl"})],-1)),t[15]||(t[15]=i("h2",{class:"text-3xl font-bold text-gray-800 dark:text-white mb-4"},"欢迎使用 DeepSeek",-1)),t[16]||(t[16]=i("p",{class:"text-lg text-gray-600 dark:text-gray-300 mb-8"}," 我是您的AI助手，可以帮您解答问题、创作内容、分析文档等 ",-1)),s.isLoggedIn?c("",!0):(r(),n("div",ye,[...t[13]||(t[13]=[i("div",{class:"flex items-center justify-center mb-3"},[i("i",{class:"fas fa-exclamation-triangle text-yellow-500 text-xl mr-2"}),i("h3",{class:"text-lg font-semibold text-yellow-800 dark:text-yellow-200"},"请先登录")],-1),i("p",{class:"text-yellow-700 dark:text-yellow-300"},"登录后即可开始与AI助手对话，创建新对话并查看历史记录",-1)])])),i("div",be,[(r(!0),n(u,null,h(a.suggestions,t=>(r(),n("div",{key:t.id,onClick:r=>e.$emit("quick-start",t.prompt),class:l(["bg-white dark:bg-dark-card rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer border border-gray-200 dark:border-gray-700",{"opacity-50 cursor-not-allowed":!s.isLoggedIn}])},[i("div",we,[i("i",{class:l([t.icon,"text-primary"])},null,2)]),i("h3",ve,d(t.title),1),i("p",ke,d(t.description),1)],10,xe))),128))])])])),i("div",He,[i("div",Ke,[s.isLoggedIn?c("",!0):(r(),n("div",Je,[...t[22]||(t[22]=[i("div",{class:"flex items-center"},[i("i",{class:"fas fa-exclamation-circle text-yellow-500 text-lg mr-3"}),i("div",null,[i("p",{class:"text-yellow-700 dark:text-yellow-300 font-medium"},"请先登录以开始对话"),i("p",{class:"text-yellow-600 dark:text-yellow-400 text-sm mt-1"},"登录后即可与AI助手进行对话")])],-1)])])),i("div",We,[i("div",Ve,[i("textarea",{ref:"messageInput",value:a.localInputMessage,onInput:t[4]||(t[4]=(...e)=>g.updateLocalInputMessage&&g.updateLocalInputMessage(...e)),onKeydown:t[5]||(t[5]=(...e)=>g.handleKeydown&&g.handleKeydown(...e)),placeholder:s.isLoggedIn?"输入您的问题...":"请先登录以开始对话",disabled:!s.isLoggedIn,class:l(["w-full resize-none border rounded-lg px-4 py-3 pr-12 focus:outline-none focus:ring-2 focus:border-transparent",s.isLoggedIn?"border-gray-300 dark:border-gray-600 focus:ring-primary bg-white dark:bg-dark-card text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400":"border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"]),style:p({height:a.textareaHeight+"px",minHeight:"52px",maxHeight:"200px"})},null,46,Xe),i("div",Qe,[a.localInputMessage&&s.isLoggedIn?(r(),n("button",{key:0,onClick:t[6]||(t[6]=(...e)=>g.clearInput&&g.clearInput(...e)),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"清空输入"},[...t[23]||(t[23]=[i("i",{class:"fas fa-times"},null,-1)])])):c("",!0),i("button",{onClick:t[7]||(t[7]=t=>e.$emit("upload-file")),disabled:!s.isLoggedIn,class:l(["transition-colors",s.isLoggedIn?"text-gray-400 hover:text-primary":"text-gray-300 dark:text-gray-600 cursor-not-allowed"]),title:"上传文件"},[...t[24]||(t[24]=[i("i",{class:"fas fa-paperclip"},null,-1)])],10,Ge)])]),i("button",{onClick:t[8]||(t[8]=(...e)=>g.sendMessage&&g.sendMessage(...e)),disabled:!a.localInputMessage.trim()||s.isLoading||!s.isLoggedIn,class:l(["w-12 h-12 rounded-lg flex items-center justify-center transition-all",a.localInputMessage.trim()&&!s.isLoading&&s.isLoggedIn?"bg-primary hover:bg-primary/90 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed"]),title:s.isLoggedIn?"发送消息":"请先登录"},[...t[25]||(t[25]=[i("i",{class:"fas fa-paper-plane"},null,-1)])],10,Ze)]),s.isLoggedIn?(r(),n("div",Ye,[t[26]||(t[26]=i("div",{class:"flex items-center space-x-4"},[i("span",null,"按 Enter 发送，Shift + Enter 换行")],-1)),i("div",et,[i("span",null,d(a.localInputMessage.length)+"/4000",1)])])):c("",!0)])])])])}]]);function rt(e,t){return function(){return e.apply(t,arguments)}}const{toString:st}=Object.prototype,{getPrototypeOf:ot}=Object,{iterator:at,toStringTag:nt}=Symbol,it=(lt=Object.create(null),e=>{const t=st.call(e);return lt[t]||(lt[t]=t.slice(8,-1).toLowerCase())});var lt;const ct=e=>(e=e.toLowerCase(),t=>it(t)===e),dt=e=>t=>typeof t===e,{isArray:ut}=Array,ht=dt("undefined");function gt(e){return null!==e&&!ht(e)&&null!==e.constructor&&!ht(e.constructor)&&mt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ft=ct("ArrayBuffer");const pt=dt("string"),mt=dt("function"),yt=dt("number"),bt=e=>null!==e&&"object"==typeof e,xt=e=>{if("object"!==it(e))return!1;const t=ot(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||nt in e||at in e)},wt=ct("Date"),vt=ct("File"),kt=ct("Blob"),Ct=ct("FileList"),St=ct("URLSearchParams"),[It,Et,Lt,Tt]=["ReadableStream","Request","Response","Headers"].map(ct);function Ot(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let s,o;if("object"!=typeof e&&(e=[e]),ut(e))for(s=0,o=e.length;s<o;s++)t.call(null,e[s],s,e);else{if(gt(e))return;const o=r?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let n;for(s=0;s<a;s++)n=o[s],t.call(null,e[n],n,e)}}function Mt(e,t){if(gt(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s,o=r.length;for(;o-- >0;)if(s=r[o],t===s.toLowerCase())return s;return null}const Rt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,At=e=>!ht(e)&&e!==Rt;const jt=(_t="undefined"!=typeof Uint8Array&&ot(Uint8Array),e=>_t&&e instanceof _t);var _t;const Ft=ct("HTMLFormElement"),Ut=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Dt=ct("RegExp"),Pt=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};Ot(r,(r,o)=>{let a;!1!==(a=t(r,o,e))&&(s[o]=a||r)}),Object.defineProperties(e,s)};const Nt=ct("AsyncFunction"),$t=(Bt="function"==typeof setImmediate,qt=mt(Rt.postMessage),Bt?setImmediate:qt?(zt=`axios@${Math.random()}`,Ht=[],Rt.addEventListener("message",({source:e,data:t})=>{e===Rt&&t===zt&&Ht.length&&Ht.shift()()},!1),e=>{Ht.push(e),Rt.postMessage(zt,"*")}):e=>setTimeout(e));var Bt,qt,zt,Ht;const Kt="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Rt):"undefined"!=typeof process&&process.nextTick||$t,Jt={isArray:ut,isArrayBuffer:ft,isBuffer:gt,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||mt(e.append)&&("formdata"===(t=it(e))||"object"===t&&mt(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ft(e.buffer),t},isString:pt,isNumber:yt,isBoolean:e=>!0===e||!1===e,isObject:bt,isPlainObject:xt,isEmptyObject:e=>{if(!bt(e)||gt(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:It,isRequest:Et,isResponse:Lt,isHeaders:Tt,isUndefined:ht,isDate:wt,isFile:vt,isBlob:kt,isRegExp:Dt,isFunction:mt,isStream:e=>bt(e)&&mt(e.pipe),isURLSearchParams:St,isTypedArray:jt,isFileList:Ct,forEach:Ot,merge:function e(){const{caseless:t,skipUndefined:r}=At(this)&&this||{},s={},o=(o,a)=>{const n=t&&Mt(s,a)||a;xt(s[n])&&xt(o)?s[n]=e(s[n],o):xt(o)?s[n]=e({},o):ut(o)?s[n]=o.slice():r&&ht(o)||(s[n]=o)};for(let a=0,n=arguments.length;a<n;a++)arguments[a]&&Ot(arguments[a],o);return s},extend:(e,t,r,{allOwnKeys:s}={})=>(Ot(t,(t,s)=>{r&&mt(t)?e[s]=rt(t,r):e[s]=t},{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,s)=>{let o,a,n;const i={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),a=o.length;a-- >0;)n=o[a],s&&!s(n,e,t)||i[n]||(t[n]=e[n],i[n]=!0);e=!1!==r&&ot(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:it,kindOfTest:ct,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return-1!==s&&s===r},toArray:e=>{if(!e)return null;if(ut(e))return e;let t=e.length;if(!yt(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[at]).call(e);let s;for(;(s=r.next())&&!s.done;){const r=s.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const s=[];for(;null!==(r=e.exec(t));)s.push(r);return s},isHTMLForm:Ft,hasOwnProperty:Ut,hasOwnProp:Ut,reduceDescriptors:Pt,freezeMethods:e=>{Pt(e,(t,r)=>{if(mt(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const s=e[r];mt(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},s=e=>{e.forEach(e=>{r[e]=!0})};return ut(e)?s(e):s(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Mt,global:Rt,isContextDefined:At,isSpecCompliantForm:function(e){return!!(e&&mt(e.append)&&"FormData"===e[nt]&&e[at])},toJSONObject:e=>{const t=new Array(10),r=(e,s)=>{if(bt(e)){if(t.indexOf(e)>=0)return;if(gt(e))return e;if(!("toJSON"in e)){t[s]=e;const o=ut(e)?[]:{};return Ot(e,(e,t)=>{const a=r(e,s+1);!ht(a)&&(o[t]=a)}),t[s]=void 0,o}}return e};return r(e,0)},isAsyncFn:Nt,isThenable:e=>e&&(bt(e)||mt(e))&&mt(e.then)&&mt(e.catch),setImmediate:$t,asap:Kt,isIterable:e=>null!=e&&mt(e[at])};function Wt(e,t,r,s,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),o&&(this.response=o,this.status=o.status?o.status:null)}Jt.inherits(Wt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Jt.toJSONObject(this.config),code:this.code,status:this.status}}});const Vt=Wt.prototype,Xt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Xt[e]={value:e}}),Object.defineProperties(Wt,Xt),Object.defineProperty(Vt,"isAxiosError",{value:!0}),Wt.from=(e,t,r,s,o,a)=>{const n=Object.create(Vt);Jt.toFlatObject(e,n,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const i=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return Wt.call(n,i,l,r,s,o),e&&null==n.cause&&Object.defineProperty(n,"cause",{value:e,configurable:!0}),n.name=e&&e.name||"Error",a&&Object.assign(n,a),n};function Qt(e){return Jt.isPlainObject(e)||Jt.isArray(e)}function Gt(e){return Jt.endsWith(e,"[]")?e.slice(0,-2):e}function Zt(e,t,r){return e?e.concat(t).map(function(e,t){return e=Gt(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Yt=Jt.toFlatObject(Jt,{},null,function(e){return/^is[A-Z]/.test(e)});function er(e,t,r){if(!Jt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const s=(r=Jt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Jt.isUndefined(t[e])})).metaTokens,o=r.visitor||c,a=r.dots,n=r.indexes,i=(r.Blob||"undefined"!=typeof Blob&&Blob)&&Jt.isSpecCompliantForm(t);if(!Jt.isFunction(o))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Jt.isDate(e))return e.toISOString();if(Jt.isBoolean(e))return e.toString();if(!i&&Jt.isBlob(e))throw new Wt("Blob is not supported. Use a Buffer instead.");return Jt.isArrayBuffer(e)||Jt.isTypedArray(e)?i&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,o){let i=e;if(e&&!o&&"object"==typeof e)if(Jt.endsWith(r,"{}"))r=s?r:r.slice(0,-2),e=JSON.stringify(e);else if(Jt.isArray(e)&&function(e){return Jt.isArray(e)&&!e.some(Qt)}(e)||(Jt.isFileList(e)||Jt.endsWith(r,"[]"))&&(i=Jt.toArray(e)))return r=Gt(r),i.forEach(function(e,s){!Jt.isUndefined(e)&&null!==e&&t.append(!0===n?Zt([r],s,a):null===n?r:r+"[]",l(e))}),!1;return!!Qt(e)||(t.append(Zt(o,r,a),l(e)),!1)}const d=[],u=Object.assign(Yt,{defaultVisitor:c,convertValue:l,isVisitable:Qt});if(!Jt.isObject(e))throw new TypeError("data must be an object");return function e(r,s){if(!Jt.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+s.join("."));d.push(r),Jt.forEach(r,function(r,a){!0===(!(Jt.isUndefined(r)||null===r)&&o.call(t,r,Jt.isString(a)?a.trim():a,s,u))&&e(r,s?s.concat(a):[a])}),d.pop()}}(e),t}function tr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function rr(e,t){this._pairs=[],e&&er(e,this,t)}const sr=rr.prototype;function or(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ar(e,t,r){if(!t)return e;const s=r&&r.encode||or;Jt.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let a;if(a=o?o(t,r):Jt.isURLSearchParams(t)?t.toString():new rr(t,r).toString(s),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}sr.append=function(e,t){this._pairs.push([e,t])},sr.toString=function(e){const t=e?function(t){return e.call(this,t,tr)}:tr;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const nr=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Jt.forEach(this.handlers,function(t){null!==t&&e(t)})}},ir={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lr={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:rr,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},cr="undefined"!=typeof window&&"undefined"!=typeof document,dr="object"==typeof navigator&&navigator||void 0,ur=cr&&(!dr||["ReactNative","NativeScript","NS"].indexOf(dr.product)<0),hr="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,gr=cr&&window.location.href||"http://localhost",fr={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:cr,hasStandardBrowserEnv:ur,hasStandardBrowserWebWorkerEnv:hr,navigator:dr,origin:gr},Symbol.toStringTag,{value:"Module"})),...lr};function pr(e){function t(e,r,s,o){let a=e[o++];if("__proto__"===a)return!0;const n=Number.isFinite(+a),i=o>=e.length;if(a=!a&&Jt.isArray(s)?s.length:a,i)return Jt.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!n;s[a]&&Jt.isObject(s[a])||(s[a]=[]);return t(e,r,s[a],o)&&Jt.isArray(s[a])&&(s[a]=function(e){const t={},r=Object.keys(e);let s;const o=r.length;let a;for(s=0;s<o;s++)a=r[s],t[a]=e[a];return t}(s[a])),!n}if(Jt.isFormData(e)&&Jt.isFunction(e.entries)){const r={};return Jt.forEachEntry(e,(e,s)=>{t(function(e){return Jt.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),s,r,0)}),r}return null}const mr={transitional:ir,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",s=r.indexOf("application/json")>-1,o=Jt.isObject(e);o&&Jt.isHTMLForm(e)&&(e=new FormData(e));if(Jt.isFormData(e))return s?JSON.stringify(pr(e)):e;if(Jt.isArrayBuffer(e)||Jt.isBuffer(e)||Jt.isStream(e)||Jt.isFile(e)||Jt.isBlob(e)||Jt.isReadableStream(e))return e;if(Jt.isArrayBufferView(e))return e.buffer;if(Jt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return er(e,new fr.classes.URLSearchParams,{visitor:function(e,t,r,s){return fr.isNode&&Jt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((a=Jt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return er(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||s?(t.setContentType("application/json",!1),function(e,t,r){if(Jt.isString(e))try{return(t||JSON.parse)(e),Jt.trim(e)}catch(s){if("SyntaxError"!==s.name)throw s}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||mr.transitional,r=t&&t.forcedJSONParsing,s="json"===this.responseType;if(Jt.isResponse(e)||Jt.isReadableStream(e))return e;if(e&&Jt.isString(e)&&(r&&!this.responseType||s)){const r=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(o){if(r){if("SyntaxError"===o.name)throw Wt.from(o,Wt.ERR_BAD_RESPONSE,this,null,this.response);throw o}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fr.classes.FormData,Blob:fr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Jt.forEach(["delete","get","head","post","put","patch"],e=>{mr.headers[e]={}});const yr=mr,br=Jt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),xr=Symbol("internals");function wr(e){return e&&String(e).trim().toLowerCase()}function vr(e){return!1===e||null==e?e:Jt.isArray(e)?e.map(vr):String(e)}function kr(e,t,r,s,o){return Jt.isFunction(s)?s.call(this,t,r):(o&&(t=r),Jt.isString(t)?Jt.isString(s)?-1!==t.indexOf(s):Jt.isRegExp(s)?s.test(t):void 0:void 0)}class Cr{constructor(e){e&&this.set(e)}set(e,t,r){const s=this;function o(e,t,r){const o=wr(t);if(!o)throw new Error("header name must be a non-empty string");const a=Jt.findKey(s,o);(!a||void 0===s[a]||!0===r||void 0===r&&!1!==s[a])&&(s[a||t]=vr(e))}const a=(e,t)=>Jt.forEach(e,(e,r)=>o(e,r,t));if(Jt.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Jt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let r,s,o;return e&&e.split("\n").forEach(function(e){o=e.indexOf(":"),r=e.substring(0,o).trim().toLowerCase(),s=e.substring(o+1).trim(),!r||t[r]&&br[r]||("set-cookie"===r?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t})(e),t);else if(Jt.isObject(e)&&Jt.isIterable(e)){let r,s,o={};for(const t of e){if(!Jt.isArray(t))throw TypeError("Object iterator must return a key-value pair");o[s=t[0]]=(r=o[s])?Jt.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}a(o,t)}else null!=e&&o(t,e,r);return this}get(e,t){if(e=wr(e)){const r=Jt.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}(e);if(Jt.isFunction(t))return t.call(this,e,r);if(Jt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=wr(e)){const r=Jt.findKey(this,e);return!(!r||void 0===this[r]||t&&!kr(0,this[r],r,t))}return!1}delete(e,t){const r=this;let s=!1;function o(e){if(e=wr(e)){const o=Jt.findKey(r,e);!o||t&&!kr(0,r[o],o,t)||(delete r[o],s=!0)}}return Jt.isArray(e)?e.forEach(o):o(e),s}clear(e){const t=Object.keys(this);let r=t.length,s=!1;for(;r--;){const o=t[r];e&&!kr(0,this[o],o,e,!0)||(delete this[o],s=!0)}return s}normalize(e){const t=this,r={};return Jt.forEach(this,(s,o)=>{const a=Jt.findKey(r,o);if(a)return t[a]=vr(s),void delete t[o];const n=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(o):String(o).trim();n!==o&&delete t[o],t[n]=vr(s),r[n]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Jt.forEach(this,(r,s)=>{null!=r&&!1!==r&&(t[s]=e&&Jt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){const t=(this[xr]=this[xr]={accessors:{}}).accessors,r=this.prototype;function s(e){const s=wr(e);t[s]||(!function(e,t){const r=Jt.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(e,r,o){return this[s].call(this,t,e,r,o)},configurable:!0})})}(r,e),t[s]=!0)}return Jt.isArray(e)?e.forEach(s):s(e),this}}Cr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Jt.reduceDescriptors(Cr.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),Jt.freezeMethods(Cr);const Sr=Cr;function Ir(e,t){const r=this||yr,s=t||r,o=Sr.from(s.headers);let a=s.data;return Jt.forEach(e,function(e){a=e.call(r,a,o.normalize(),t?t.status:void 0)}),o.normalize(),a}function Er(e){return!(!e||!e.__CANCEL__)}function Lr(e,t,r){Wt.call(this,null==e?"canceled":e,Wt.ERR_CANCELED,t,r),this.name="CanceledError"}function Tr(e,t,r){const s=r.config.validateStatus;r.status&&s&&!s(r.status)?t(new Wt("Request failed with status code "+r.status,[Wt.ERR_BAD_REQUEST,Wt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}Jt.inherits(Lr,Wt,{__CANCEL__:!0});const Or=(e,t,r=3)=>{let s=0;const o=function(e,t){e=e||10;const r=new Array(e),s=new Array(e);let o,a=0,n=0;return t=void 0!==t?t:1e3,function(i){const l=Date.now(),c=s[n];o||(o=l),r[a]=i,s[a]=l;let d=n,u=0;for(;d!==a;)u+=r[d++],d%=e;if(a=(a+1)%e,a===n&&(n=(n+1)%e),l-o<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}}(50,250);return function(e,t){let r,s,o=0,a=1e3/t;const n=(t,a=Date.now())=>{o=a,r=null,s&&(clearTimeout(s),s=null),e(...t)};return[(...e)=>{const t=Date.now(),i=t-o;i>=a?n(e,t):(r=e,s||(s=setTimeout(()=>{s=null,n(r)},a-i)))},()=>r&&n(r)]}(r=>{const a=r.loaded,n=r.lengthComputable?r.total:void 0,i=a-s,l=o(i);s=a;e({loaded:a,total:n,progress:n?a/n:void 0,bytes:i,rate:l||void 0,estimated:l&&n&&a<=n?(n-a)/l:void 0,event:r,lengthComputable:null!=n,[t?"download":"upload"]:!0})},r)},Mr=(e,t)=>{const r=null!=e;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},Rr=e=>(...t)=>Jt.asap(()=>e(...t)),Ar=fr.hasStandardBrowserEnv?(jr=new URL(fr.origin),_r=fr.navigator&&/(msie|trident)/i.test(fr.navigator.userAgent),e=>(e=new URL(e,fr.origin),jr.protocol===e.protocol&&jr.host===e.host&&(_r||jr.port===e.port))):()=>!0;var jr,_r;const Fr=fr.hasStandardBrowserEnv?{write(e,t,r,s,o,a,n){if("undefined"==typeof document)return;const i=[`${e}=${encodeURIComponent(t)}`];Jt.isNumber(r)&&i.push(`expires=${new Date(r).toUTCString()}`),Jt.isString(s)&&i.push(`path=${s}`),Jt.isString(o)&&i.push(`domain=${o}`),!0===a&&i.push("secure"),Jt.isString(n)&&i.push(`SameSite=${n}`),document.cookie=i.join("; ")},read(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function Ur(e,t,r){let s=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(s||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Dr=e=>e instanceof Sr?{...e}:e;function Pr(e,t){t=t||{};const r={};function s(e,t,r,s){return Jt.isPlainObject(e)&&Jt.isPlainObject(t)?Jt.merge.call({caseless:s},e,t):Jt.isPlainObject(t)?Jt.merge({},t):Jt.isArray(t)?t.slice():t}function o(e,t,r,o){return Jt.isUndefined(t)?Jt.isUndefined(e)?void 0:s(void 0,e,0,o):s(e,t,0,o)}function a(e,t){if(!Jt.isUndefined(t))return s(void 0,t)}function n(e,t){return Jt.isUndefined(t)?Jt.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function i(r,o,a){return a in t?s(r,o):a in e?s(void 0,r):void 0}const l={url:a,method:a,data:a,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,withXSRFToken:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:i,headers:(e,t,r)=>o(Dr(e),Dr(t),0,!0)};return Jt.forEach(Object.keys({...e,...t}),function(s){const a=l[s]||o,n=a(e[s],t[s],s);Jt.isUndefined(n)&&a!==i||(r[s]=n)}),r}const Nr=e=>{const t=Pr({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:o,xsrfCookieName:a,headers:n,auth:i}=t;if(t.headers=n=Sr.from(n),t.url=ar(Ur(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&n.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),Jt.isFormData(r))if(fr.hasStandardBrowserEnv||fr.hasStandardBrowserWebWorkerEnv)n.setContentType(void 0);else if(Jt.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&n.set(e,r)})}if(fr.hasStandardBrowserEnv&&(s&&Jt.isFunction(s)&&(s=s(t)),s||!1!==s&&Ar(t.url))){const e=o&&a&&Fr.read(a);e&&n.set(o,e)}return t},$r="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const s=Nr(e);let o=s.data;const a=Sr.from(s.headers).normalize();let n,i,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:g}=s;function f(){c&&c(),d&&d(),s.cancelToken&&s.cancelToken.unsubscribe(n),s.signal&&s.signal.removeEventListener("abort",n)}let p=new XMLHttpRequest;function m(){if(!p)return;const s=Sr.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());Tr(function(e){t(e),f()},function(e){r(e),f()},{data:u&&"text"!==u&&"json"!==u?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:s,config:e,request:p}),p=null}p.open(s.method.toUpperCase(),s.url,!0),p.timeout=s.timeout,"onloadend"in p?p.onloadend=m:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(m)},p.onabort=function(){p&&(r(new Wt("Request aborted",Wt.ECONNABORTED,e,p)),p=null)},p.onerror=function(t){const s=new Wt(t&&t.message?t.message:"Network Error",Wt.ERR_NETWORK,e,p);s.event=t||null,r(s),p=null},p.ontimeout=function(){let t=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const o=s.transitional||ir;s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),r(new Wt(t,o.clarifyTimeoutError?Wt.ETIMEDOUT:Wt.ECONNABORTED,e,p)),p=null},void 0===o&&a.setContentType(null),"setRequestHeader"in p&&Jt.forEach(a.toJSON(),function(e,t){p.setRequestHeader(t,e)}),Jt.isUndefined(s.withCredentials)||(p.withCredentials=!!s.withCredentials),u&&"json"!==u&&(p.responseType=s.responseType),g&&([l,d]=Or(g,!0),p.addEventListener("progress",l)),h&&p.upload&&([i,c]=Or(h),p.upload.addEventListener("progress",i),p.upload.addEventListener("loadend",c)),(s.cancelToken||s.signal)&&(n=t=>{p&&(r(!t||t.type?new Lr(null,e,p):t),p.abort(),p=null)},s.cancelToken&&s.cancelToken.subscribe(n),s.signal&&(s.signal.aborted?n():s.signal.addEventListener("abort",n)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(s.url);y&&-1===fr.protocols.indexOf(y)?r(new Wt("Unsupported protocol "+y+":",Wt.ERR_BAD_REQUEST,e)):p.send(o||null)})},Br=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,s=new AbortController;const o=function(e){if(!r){r=!0,n();const t=e instanceof Error?e:this.reason;s.abort(t instanceof Wt?t:new Lr(t instanceof Error?t.message:t))}};let a=t&&setTimeout(()=>{a=null,o(new Wt(`timeout ${t} of ms exceeded`,Wt.ETIMEDOUT))},t);const n=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)}),e=null)};e.forEach(e=>e.addEventListener("abort",o));const{signal:i}=s;return i.unsubscribe=()=>Jt.asap(n),i}},qr=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let s,o=0;for(;o<r;)s=o+t,yield e.slice(o,s),o=s},zr=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},Hr=(e,t,r,s)=>{const o=async function*(e,t){for await(const r of zr(e))yield*qr(r,t)}(e,t);let a,n=0,i=e=>{a||(a=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:t,value:s}=await o.next();if(t)return i(),void e.close();let a=s.byteLength;if(r){let e=n+=a;r(e)}e.enqueue(new Uint8Array(s))}catch(t){throw i(t),t}},cancel:e=>(i(e),o.return())},{highWaterMark:2})},{isFunction:Kr}=Jt,Jr=(({Request:e,Response:t})=>({Request:e,Response:t}))(Jt.global),{ReadableStream:Wr,TextEncoder:Vr}=Jt.global,Xr=(e,...t)=>{try{return!!e(...t)}catch(r){return!1}},Qr=e=>{e=Jt.merge.call({skipUndefined:!0},Jr,e);const{fetch:t,Request:r,Response:s}=e,o=t?Kr(t):"function"==typeof fetch,a=Kr(r),n=Kr(s);if(!o)return!1;const i=o&&Kr(Wr),l=o&&("function"==typeof Vr?(c=new Vr,e=>c.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var c;const d=a&&i&&Xr(()=>{let e=!1;const t=new r(fr.origin,{body:new Wr,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=n&&i&&Xr(()=>Jt.isReadableStream(new s("").body)),h={stream:u&&(e=>e.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,r)=>{let s=t&&t[e];if(s)return s.call(t);throw new Wt(`Response type '${e}' is not supported`,Wt.ERR_NOT_SUPPORT,r)})});const g=async(e,t)=>{const s=Jt.toFiniteNumber(e.getContentLength());return null==s?(async e=>{if(null==e)return 0;if(Jt.isBlob(e))return e.size;if(Jt.isSpecCompliantForm(e)){const t=new r(fr.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Jt.isArrayBufferView(e)||Jt.isArrayBuffer(e)?e.byteLength:(Jt.isURLSearchParams(e)&&(e+=""),Jt.isString(e)?(await l(e)).byteLength:void 0)})(t):s};return async e=>{let{url:o,method:n,data:i,signal:l,cancelToken:c,timeout:f,onDownloadProgress:p,onUploadProgress:m,responseType:y,headers:b,withCredentials:x="same-origin",fetchOptions:w}=Nr(e),v=t||fetch;y=y?(y+"").toLowerCase():"text";let k=Br([l,c&&c.toAbortSignal()],f),C=null;const S=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let I;try{if(m&&d&&"get"!==n&&"head"!==n&&0!==(I=await g(b,i))){let e,t=new r(o,{method:"POST",body:i,duplex:"half"});if(Jt.isFormData(i)&&(e=t.headers.get("content-type"))&&b.setContentType(e),t.body){const[e,r]=Mr(I,Or(Rr(m)));i=Hr(t.body,65536,e,r)}}Jt.isString(x)||(x=x?"include":"omit");const t=a&&"credentials"in r.prototype,l={...w,signal:k,method:n.toUpperCase(),headers:b.normalize().toJSON(),body:i,duplex:"half",credentials:t?x:void 0};C=a&&new r(o,l);let c=await(a?v(C,w):v(o,l));const f=u&&("stream"===y||"response"===y);if(u&&(p||f&&S)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=Jt.toFiniteNumber(c.headers.get("content-length")),[r,o]=p&&Mr(t,Or(Rr(p),!0))||[];c=new s(Hr(c.body,65536,r,()=>{o&&o(),S&&S()}),e)}y=y||"text";let E=await h[Jt.findKey(h,y)||"text"](c,e);return!f&&S&&S(),await new Promise((t,r)=>{Tr(t,r,{data:E,headers:Sr.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:C})})}catch(E){if(S&&S(),E&&"TypeError"===E.name&&/Load failed|fetch/i.test(E.message))throw Object.assign(new Wt("Network Error",Wt.ERR_NETWORK,e,C),{cause:E.cause||E});throw Wt.from(E,E&&E.code,e,C)}}},Gr=new Map,Zr=e=>{let t=e&&e.env||{};const{fetch:r,Request:s,Response:o}=t,a=[s,o,r];let n,i,l=a.length,c=Gr;for(;l--;)n=a[l],i=c.get(n),void 0===i&&c.set(n,i=l?new Map:Qr(t)),c=i;return i};Zr();const Yr={http:null,xhr:$r,fetch:{get:Zr}};Jt.forEach(Yr,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});const es=e=>`- ${e}`,ts=e=>Jt.isFunction(e)||null===e||!1===e;const rs={getAdapter:function(e,t){e=Jt.isArray(e)?e:[e];const{length:r}=e;let s,o;const a={};for(let n=0;n<r;n++){let r;if(s=e[n],o=s,!ts(s)&&(o=Yr[(r=String(s)).toLowerCase()],void 0===o))throw new Wt(`Unknown adapter '${r}'`);if(o&&(Jt.isFunction(o)||(o=o.get(t))))break;a[r||"#"+n]=o}if(!o){const e=Object.entries(a).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new Wt("There is no suitable adapter to dispatch the request "+(r?e.length>1?"since :\n"+e.map(es).join("\n"):" "+es(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return o},adapters:Yr};function ss(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Lr(null,e)}function os(e){ss(e),e.headers=Sr.from(e.headers),e.data=Ir.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return rs.getAdapter(e.adapter||yr.adapter,e)(e).then(function(t){return ss(e),t.data=Ir.call(e,e.transformResponse,t),t.headers=Sr.from(t.headers),t},function(t){return Er(t)||(ss(e),t&&t.response&&(t.response.data=Ir.call(e,e.transformResponse,t.response),t.response.headers=Sr.from(t.response.headers))),Promise.reject(t)})}const as="1.13.2",ns={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ns[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const is={};ns.transitional=function(e,t,r){function s(e,t){return"[Axios v"+as+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,o,a)=>{if(!1===e)throw new Wt(s(o," has been removed"+(t?" in "+t:"")),Wt.ERR_DEPRECATED);return t&&!is[o]&&(is[o]=!0,console.warn(s(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,a)}},ns.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};const ls={assertOptions:function(e,t,r){if("object"!=typeof e)throw new Wt("options must be an object",Wt.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let o=s.length;for(;o-- >0;){const a=s[o],n=t[a];if(n){const t=e[a],r=void 0===t||n(t,a,e);if(!0!==r)throw new Wt("option "+a+" must be "+r,Wt.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new Wt("Unknown option "+a,Wt.ERR_BAD_OPTION)}},validators:ns},cs=ls.validators;class ds{constructor(e){this.defaults=e||{},this.interceptors={request:new nr,response:new nr}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(s){}}throw r}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Pr(this.defaults,t);const{transitional:r,paramsSerializer:s,headers:o}=t;void 0!==r&&ls.assertOptions(r,{silentJSONParsing:cs.transitional(cs.boolean),forcedJSONParsing:cs.transitional(cs.boolean),clarifyTimeoutError:cs.transitional(cs.boolean)},!1),null!=s&&(Jt.isFunction(s)?t.paramsSerializer={serialize:s}:ls.assertOptions(s,{encode:cs.function,serialize:cs.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ls.assertOptions(t,{baseUrl:cs.spelling("baseURL"),withXsrfToken:cs.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=o&&Jt.merge(o.common,o[t.method]);o&&Jt.forEach(["delete","get","head","post","put","patch","common"],e=>{delete o[e]}),t.headers=Sr.concat(a,o);const n=[];let i=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,n.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!i){const e=[os.bind(this),void 0];for(e.unshift(...n),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=n.length;let h=t;for(;u<d;){const e=n[u++],t=n[u++];try{h=e(h)}catch(g){t.call(this,g);break}}try{c=os.call(this,h)}catch(g){return Promise.reject(g)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return ar(Ur((e=Pr(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Jt.forEach(["delete","get","head","options"],function(e){ds.prototype[e]=function(t,r){return this.request(Pr(r||{},{method:e,url:t,data:(r||{}).data}))}}),Jt.forEach(["post","put","patch"],function(e){function t(t){return function(r,s,o){return this.request(Pr(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}ds.prototype[e]=t(),ds.prototype[e+"Form"]=t(!0)});const us=ds;class hs{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const s=new Promise(e=>{r.subscribe(e),t=e}).then(e);return s.cancel=function(){r.unsubscribe(t)},s},e(function(e,s,o){r.reason||(r.reason=new Lr(e,s,o),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new hs(function(t){e=t}),cancel:e}}}const gs=hs;const fs={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(fs).forEach(([e,t])=>{fs[t]=e});const ps=fs;const ms=function e(t){const r=new us(t),s=rt(us.prototype.request,r);return Jt.extend(s,us.prototype,r,{allOwnKeys:!0}),Jt.extend(s,r,null,{allOwnKeys:!0}),s.create=function(r){return e(Pr(t,r))},s}(yr);ms.Axios=us,ms.CanceledError=Lr,ms.CancelToken=gs,ms.isCancel=Er,ms.VERSION=as,ms.toFormData=er,ms.AxiosError=Wt,ms.Cancel=ms.CanceledError,ms.all=function(e){return Promise.all(e)},ms.spread=function(e){return function(t){return e.apply(null,t)}},ms.isAxiosError=function(e){return Jt.isObject(e)&&!0===e.isAxiosError},ms.mergeConfig=Pr,ms.AxiosHeaders=Sr,ms.formToJSON=e=>pr(Jt.isHTMLForm(e)?new FormData(e):e),ms.getAdapter=rs.getAdapter,ms.HttpStatusCode=ps,ms.default=ms;const ys=ms.create({baseURL:"https://deepseek.lbuding.com/api",timeout:6e4,headers:{"Content-Type":"application/json"}});ys.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),ys.interceptors.response.use(e=>e.data,e=>{var t,r,s;return console.error("API Error:",(null==(t=e.response)?void 0:t.data)||e.message),401===(null==(r=e.response)?void 0:r.status)&&(localStorage.removeItem("token"),localStorage.removeItem("userInfo"),window.location.reload()),Promise.reject((null==(s=e.response)?void 0:s.data)||e.message)});const bs=e=>ys.post("/auth/login",e),xs=e=>ys.post("/auth/register",e),ws=e=>(console.log("API sendMessage 发送请求:",e),ys.post("/chat/send",e).then(e=>(console.log("API sendMessage 收到响应:",e),e)).catch(e=>{throw console.error("API sendMessage 错误:",e),e.response&&(console.error("错误响应数据:",e.response.data),console.error("错误状态码:",e.response.status)),e})),vs=e=>ys.get(`/chat/history/${e}`),ks=(e,t=1,r=10)=>ys.post("/auth/chats",{user_id:e,page:t,page_size:r}),Cs=e=>ys.delete(`/chat/${e}`),Ss={name:"LoginModal",props:{showLoginModal:{type:Boolean,default:!1}},data:()=>({isLoginMode:!0,isLoading:!1,loginForm:{identifier:"",password:"",rememberMe:!1},registerForm:{username:"",email:"",password:"",confirmPassword:"",agreeTerms:!1}}),methods:{async handleLogin(){if(this.loginForm.identifier&&this.loginForm.password){this.isLoading=!0;try{const e=await bs({identifier:this.loginForm.identifier,password:this.loginForm.password,remember_me:this.loginForm.rememberMe});e.success?(this.$emit("login-success",e.user),this.$emit("close-modal"),this.resetForms()):this.$emit("show-error",e.message||"登录失败")}catch(e){console.error("登录请求失败:",e),this.$emit("show-error","登录失败，请检查网络连接")}finally{this.isLoading=!1}}else this.$emit("show-error","请输入用户名/邮箱和密码")},async handleRegister(){if(this.registerForm.username&&this.registerForm.email&&this.registerForm.password)if(this.registerForm.password===this.registerForm.confirmPassword)if(this.registerForm.agreeTerms){this.isLoading=!0;try{const e=await xs({username:this.registerForm.username,email:this.registerForm.email,password:this.registerForm.password,confirm_password:this.registerForm.confirmPassword,agree_terms:this.registerForm.agreeTerms});e.success?(this.isLoginMode=!0,this.$emit("show-success","注册成功，请登录"),this.resetForms()):this.$emit("show-error",e.message||"注册失败")}catch(e){console.error("注册请求失败:",e),this.$emit("show-error","注册失败，请检查网络连接")}finally{this.isLoading=!1}}else this.$emit("show-error","请同意服务条款和隐私政策");else this.$emit("show-error","两次输入的密码不一致");else this.$emit("show-error","请填写所有必填字段")},resetForms(){this.loginForm={identifier:"",password:"",rememberMe:!1},this.registerForm={username:"",email:"",password:"",confirmPassword:"",agreeTerms:!1}}},watch:{showLoginModal(e){e||(this.resetForms(),this.isLoading=!1)}},emits:["close-modal","login-success","show-success","show-error"]},Is={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md overflow-hidden"},Es={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},Ls={class:"text-lg font-semibold text-gray-900 dark:text-white"},Ts={class:"p-6"},Os={class:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 mb-6"},Ms={class:"flex items-center justify-between"},Rs={class:"flex items-center"},As=["disabled"],js={key:0},_s={key:1,class:"flex items-center justify-center"},Fs={class:"flex items-center"},Us=["disabled"],Ds={key:0},Ps={key:1,class:"flex items-center justify-center"};const Ns={class:"flex h-full overflow-hidden"};k(C({name:"App",components:{Toast:A,Sidebar:ie,ChatArea:tt,LoginModal:C(Ss,[["render",function(e,t,u,h,f,p){return r(),s(a,{name:"modal"},{default:o(()=>[u.showLoginModal?(r(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t[13]||(t[13]=g(t=>e.$emit("close-modal"),["self"]))},[i("div",Is,[i("div",Es,[i("h3",Ls,d(f.isLoginMode?"登录":"注册"),1),i("button",{onClick:t[0]||(t[0]=t=>e.$emit("close-modal")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"},[...t[14]||(t[14]=[i("i",{class:"fas fa-times"},null,-1)])])]),i("div",Ts,[i("div",Os,[i("button",{onClick:t[1]||(t[1]=e=>f.isLoginMode=!0),class:l(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors",f.isLoginMode?"bg-white dark:bg-gray-700 text-primary shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"])}," 登录 ",2),i("button",{onClick:t[2]||(t[2]=e=>f.isLoginMode=!1),class:l(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors",f.isLoginMode?"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200":"bg-white dark:bg-gray-700 text-primary shadow-sm"])}," 注册 ",2)]),f.isLoginMode?(r(),n("form",{key:0,onSubmit:t[6]||(t[6]=g((...e)=>p.handleLogin&&p.handleLogin(...e),["prevent"])),class:"space-y-4"},[i("div",null,[t[15]||(t[15]=i("label",{for:"loginIdentifier",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 用户名或邮箱 ",-1)),m(i("input",{id:"loginIdentifier","onUpdate:modelValue":t[3]||(t[3]=e=>f.loginForm.identifier=e),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-dark-input text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"请输入用户名或邮箱地址"},null,512),[[y,f.loginForm.identifier]])]),i("div",null,[t[16]||(t[16]=i("label",{for:"loginPassword",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 密码 ",-1)),m(i("input",{id:"loginPassword","onUpdate:modelValue":t[4]||(t[4]=e=>f.loginForm.password=e),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-dark-input text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"请输入密码"},null,512),[[y,f.loginForm.password]])]),i("div",Ms,[i("label",Rs,[m(i("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>f.loginForm.rememberMe=e),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[b,f.loginForm.rememberMe]]),t[17]||(t[17]=i("span",{class:"ml-2 text-sm text-gray-600 dark:text-gray-400"},"记住我",-1))]),t[18]||(t[18]=i("button",{type:"button",class:"text-sm text-primary hover:text-primary/80 transition-colors"}," 忘记密码？ ",-1))]),i("button",{type:"submit",disabled:f.isLoading,class:l(["w-full py-3 px-4 rounded-lg font-medium transition-colors",f.isLoading?"bg-gray-300 dark:bg-gray-600 text-gray-500 cursor-not-allowed":"bg-primary hover:bg-primary/90 text-white"])},[f.isLoading?(r(),n("span",_s,[...t[19]||(t[19]=[i("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),x(" 登录中... ",-1)])])):(r(),n("span",js,"登录"))],10,As)],32)):(r(),n("form",{key:1,onSubmit:t[12]||(t[12]=g((...e)=>p.handleRegister&&p.handleRegister(...e),["prevent"])),class:"space-y-4"},[i("div",null,[t[20]||(t[20]=i("label",{for:"registerUsername",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 用户名 ",-1)),m(i("input",{id:"registerUsername","onUpdate:modelValue":t[7]||(t[7]=e=>f.registerForm.username=e),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-dark-input text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"请输入用户名"},null,512),[[y,f.registerForm.username]])]),i("div",null,[t[21]||(t[21]=i("label",{for:"registerEmail",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 邮箱地址 ",-1)),m(i("input",{id:"registerEmail","onUpdate:modelValue":t[8]||(t[8]=e=>f.registerForm.email=e),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-dark-input text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"请输入邮箱地址"},null,512),[[y,f.registerForm.email]])]),i("div",null,[t[22]||(t[22]=i("label",{for:"registerPassword",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 密码 ",-1)),m(i("input",{id:"registerPassword","onUpdate:modelValue":t[9]||(t[9]=e=>f.registerForm.password=e),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-dark-input text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"请输入密码"},null,512),[[y,f.registerForm.password]])]),i("div",null,[t[23]||(t[23]=i("label",{for:"registerConfirmPassword",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 确认密码 ",-1)),m(i("input",{id:"registerConfirmPassword","onUpdate:modelValue":t[10]||(t[10]=e=>f.registerForm.confirmPassword=e),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-dark-input text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"请再次输入密码"},null,512),[[y,f.registerForm.confirmPassword]])]),i("div",Fs,[m(i("input",{id:"agreeTerms","onUpdate:modelValue":t[11]||(t[11]=e=>f.registerForm.agreeTerms=e),type:"checkbox",required:"",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[b,f.registerForm.agreeTerms]]),t[24]||(t[24]=i("label",{for:"agreeTerms",class:"ml-2 text-sm text-gray-600 dark:text-gray-400"},[x(" 我已阅读并同意 "),i("a",{href:"#",class:"text-primary hover:text-primary/80 transition-colors"},"服务条款"),x(" 和 "),i("a",{href:"#",class:"text-primary hover:text-primary/80 transition-colors"},"隐私政策")],-1))]),i("button",{type:"submit",disabled:f.isLoading,class:l(["w-full py-3 px-4 rounded-lg font-medium transition-colors",f.isLoading?"bg-gray-300 dark:bg-gray-600 text-gray-500 cursor-not-allowed":"bg-primary hover:bg-primary/90 text-white"])},[f.isLoading?(r(),n("span",Ps,[...t[25]||(t[25]=[i("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),x(" 注册中... ",-1)])])):(r(),n("span",Ds,"注册"))],10,Us)],32))])])])):c("",!0)]),_:1})}],["__scopeId","data-v-0d9e81c0"]])},setup(){const t=e(null),r=function(){const t=e(null),r=e=>{t.value&&t.value.show(e)};return{show:r,hide:()=>{t.value&&t.value.hide()},success:(e,t="成功")=>{r({title:t,message:e,type:"success"})},error:(e,t="错误")=>{r({title:t,message:e,type:"error"})},warning:(e,t="提示")=>{r({title:t,message:e,type:"warning"})},info:(e,t="信息")=>{r({title:t,message:e,type:"info"})},setRef:e=>{t.value=e}}}();return{toastRef:t,toast:r,setToastRef:()=>{t.value&&r.setRef(t.value)}}},data:()=>({isDarkMode:!1,isSidebarCollapsed:!1,showUserDropdown:!1,isLoggedIn:!1,userInfo:{username:"",email:"",avatar:"",plan:"个人版"},showLoginModal:!1,selectedChatId:null,recentChats:[],currentMessages:[],messagesCache:{},isLoading:!1,inputMessage:"",pagination:{currentPage:1,pageSize:10,totalChats:0,hasMore:!1,isLoading:!1}}),mounted(){this.setToastRef(),this.$nextTick(()=>{this.setToastRef()});"dark"===localStorage.getItem("theme")&&(this.isDarkMode=!0);const e=localStorage.getItem("userInfo");e&&(this.isLoggedIn=!0,this.userInfo=JSON.parse(e),this.restoreTempChats(),this.loadUserChats()),this.setupKeyboardShortcuts()},methods:{toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed},expandSidebar(){this.isSidebarCollapsed=!1},toggleUserDropdown(){this.showUserDropdown=!this.showUserDropdown},async newChat(){if(!this.isLoggedIn)return this.showLoginModal=!0,this.toast.info("请先登录后再创建新对话"),null;const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),t=[{color:"bg-blue-100",iconColor:"text-blue-500"},{color:"bg-green-100",iconColor:"text-green-500"},{color:"bg-yellow-100",iconColor:"text-yellow-500"},{color:"bg-red-100",iconColor:"text-red-500"},{color:"bg-purple-100",iconColor:"text-purple-500"},{color:"bg-pink-100",iconColor:"text-pink-500"},{color:"bg-indigo-100",iconColor:"text-indigo-500"},{color:"bg-teal-100",iconColor:"text-teal-500"}],r=t[Math.floor(Math.random()*t.length)],s={id:e,title:"新对话",time:"刚刚",color:r.color,iconColor:r.iconColor,isTemp:!0,tempId:`temp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};return this.recentChats.unshift(s),this.selectedChatId=e,this.currentMessages=[],this.messagesCache[e]=[],this.saveTempChats(),this.toast.info("已创建新对话"),e},selectChat(e){if(!this.isLoggedIn)return this.showLoginModal=!0,void this.toast.info("请先登录后再查看对话历史");this.selectedChatId=e;const t=this.recentChats.find(t=>t.id===e);t&&t.isTemp?this.currentMessages=this.messagesCache[e]||[]:this.messagesCache[e]?this.currentMessages=this.messagesCache[e]:this.loadChatMessages(e)},async deleteChat(e){const t=this.recentChats.findIndex(t=>t.id===e);if(-1!==t){const s=this.recentChats[t];try{if(s.isTemp)this.recentChats.splice(t,1),delete this.messagesCache[e],this.selectedChatId===e&&(this.selectedChatId=this.recentChats.length>0?this.recentChats[0].id:null,this.currentMessages=[]),this.saveTempChats(),this.toast.success("对话已删除");else{this.loading=!0;const r=await Cs(e);r.success?(this.recentChats.splice(t,1),delete this.messagesCache[e],this.selectedChatId===e&&(this.selectedChatId=this.recentChats.length>0?this.recentChats[0].id:null,this.currentMessages=[]),await this.loadUserChats(!1,!0),this.toast.success("对话已删除")):this.toast.error(r.message||"删除对话失败")}}catch(r){console.error("删除对话失败:",r),this.toast.error("删除对话失败，请稍后重试")}finally{this.loading=!1}}},async loadChatMessages(e){try{const t=await vs(e);t.success?(this.currentMessages=t.messages||[],this.messagesCache[e]=this.currentMessages):(this.currentMessages=[],this.messagesCache[e]=[])}catch(t){console.error("获取聊天历史失败:",t),this.currentMessages=[],this.messagesCache[e]=[]}},async loadUserChats(e=!1,t=!1){var r;if(!this.isLoggedIn||!(null==(r=this.userInfo)?void 0:r.id))return;if(e&&!this.pagination.hasMore)return;this.pagination.isLoading=!0;const s=e?this.pagination.currentPage+1:1;if(!e&&!t){const e=`userChats_${this.userInfo.id}_page_${s}`,t=localStorage.getItem(e),r=localStorage.getItem(`${e}_time`);if(t&&r&&Date.now()-parseInt(r)<3e5)try{const e=JSON.parse(t);return this.mergeChatsWithServerData(e,s,!1),void(this.pagination.isLoading=!1)}catch(o){console.warn("缓存解析失败，重新加载对话",o)}}if(t&&!e){const e=`userChats_${this.userInfo.id}_page_${s}`;localStorage.removeItem(e),localStorage.removeItem(`${e}_time`)}try{const r=await ks(this.userInfo.id,s,this.pagination.pageSize);if(r.success&&r.chats){if(!e&&!t){const e=`userChats_${this.userInfo.id}_page_${s}`;localStorage.setItem(e,JSON.stringify(r.chats)),localStorage.setItem(`${e}_time`,Date.now().toString())}this.mergeChatsWithServerData(r.chats,s,e,r.total_count)}else e||(this.recentChats=this.recentChats.filter(e=>e.isTemp),this.saveTempChats()),this.toast.error("获取对话列表失败")}catch(o){console.error("获取用户对话失败:",o),e||(this.recentChats=this.recentChats.filter(e=>e.isTemp),this.saveTempChats()),this.toast.error("获取对话列表失败")}finally{this.pagination.isLoading=!1}},mergeChatsWithServerData(e,t,r=!1,s=0){const o=[{color:"bg-blue-100",iconColor:"text-blue-500"},{color:"bg-green-100",iconColor:"text-green-500"},{color:"bg-yellow-100",iconColor:"text-yellow-500"},{color:"bg-red-100",iconColor:"text-red-500"},{color:"bg-purple-100",iconColor:"text-purple-500"},{color:"bg-pink-100",iconColor:"text-pink-500"},{color:"bg-indigo-100",iconColor:"text-indigo-500"},{color:"bg-teal-100",iconColor:"text-teal-500"}],a=e.map((e,t)=>{const r=o[Math.floor(Math.random()*o.length)];return{id:e.id,title:e.title,time:this.formatTime(e.created_at),color:r.color,iconColor:r.iconColor,isTemp:!1}});if(this.pagination.currentPage=t,this.pagination.totalChats=s,this.pagination.hasMore=s>t*this.pagination.pageSize,r)this.recentChats=[...this.recentChats,...a];else{const e=this.recentChats.filter(e=>e.isTemp);this.recentChats=[...e,...a]}this.saveTempChats(),!r&&this.recentChats.length>0&&!this.selectedChatId?(this.selectedChatId=this.recentChats[0].id,this.loadChatMessages(this.selectedChatId)):this.selectedChatId&&this.loadChatMessages(this.selectedChatId)},async refreshUserChats(){var e;if(this.isLoggedIn&&(null==(e=this.userInfo)?void 0:e.id))try{const e=await ks(this.userInfo.id,1,this.pagination.pageSize);if(e.success&&e.chats){const t=`userChats_${this.userInfo.id}_page_1`;localStorage.setItem(t,JSON.stringify(e.chats)),localStorage.setItem(`${t}_time`,Date.now().toString()),this.mergeChatsWithServerData(e.chats,1,!1,e.total_count),this.toast.success("对话列表已刷新")}else this.toast.error("刷新对话列表失败")}catch(t){console.error("刷新对话列表失败:",t),this.toast.error("刷新对话列表失败")}},async loadMoreChats(){!this.pagination.isLoading&&this.pagination.hasMore&&await this.loadUserChats(!0)},saveTempChats(){var e;if(!this.isLoggedIn||!(null==(e=this.userInfo)?void 0:e.id))return;const t=this.recentChats.filter(e=>e.isTemp),r=`tempChats_${this.userInfo.id}`;localStorage.setItem(r,JSON.stringify(t))},restoreTempChats(){var e;if(!this.isLoggedIn||!(null==(e=this.userInfo)?void 0:e.id))return;const t=`tempChats_${this.userInfo.id}`,r=localStorage.getItem(t);if(r)try{const e=JSON.parse(r);this.recentChats=[...e,...this.recentChats.filter(e=>!e.isTemp)]}catch(s){console.warn("恢复临时对话失败:",s)}},formatTime(e){if(!e)return"";const t=new Date(e),r=new Date-t,s=Math.floor(r/6e4),o=Math.floor(r/36e5),a=Math.floor(r/864e5);return s<1?"刚刚":s<60?`${s}分钟前`:o<24?`${o}小时前`:a<7?`${a}天前`:t.toLocaleDateString()},async sendMessage(e){var t;if(console.log("开始发送消息:",e),!this.isLoggedIn)return console.log("用户未登录，显示登录模态框"),this.showLoginModal=!0,void this.toast.info("请先登录后再发送消息");if(!e||!e.trim())return console.log("消息为空，返回"),void this.toast.error("消息不能为空");this.selectedChatId||(console.log("没有选中对话，创建新对话"),await this.newChat()),console.log("当前选中的对话ID:",this.selectedChatId),this.isLoading=!0;try{const s={id:Date.now().toString(),content:e.trim(),role:"user",timestamp:(new Date).toISOString()};console.log("创建用户消息:",s),this.currentMessages=[...this.currentMessages,s],this.messagesCache[this.selectedChatId]=this.currentMessages;const o={message:e.trim(),chat_id:this.selectedChatId,user_id:this.userInfo.id};console.log("发送API请求，数据:",o);const a=await ws(o);if(console.log("收到API响应:",a),a.success){if(console.log("消息发送成功"),a.response){const e={id:a.response.id,content:a.response.content,role:a.response.role,timestamp:new Date(a.response.timestamp).toISOString()};console.log("添加AI回复:",e),this.currentMessages=[...this.currentMessages,e],this.messagesCache[this.selectedChatId]=this.currentMessages}const e=this.recentChats.find(e=>e.id===this.selectedChatId);if(e&&e.isTemp&&a.chat_id){console.log("更新临时对话ID:",this.selectedChatId,"->",a.chat_id);const e=this.selectedChatId;this.selectedChatId=a.chat_id;const t=this.recentChats.findIndex(t=>t.id===e);-1!==t&&(this.recentChats[t].id=a.chat_id,this.recentChats[t].isTemp=!1),this.messagesCache[a.chat_id]=this.currentMessages,delete this.messagesCache[e],this.saveTempChats()}if(this.isLoggedIn&&(null==(t=this.userInfo)?void 0:t.id))try{const e=await ks(this.userInfo.id,1,this.pagination.pageSize);if(e.success&&e.chats){const t=`userChats_${this.userInfo.id}_page_1`;localStorage.setItem(t,JSON.stringify(e.chats)),localStorage.setItem(`${t}_time`,Date.now().toString());const r=this.selectedChatId;this.mergeChatsWithServerData(e.chats,1,!1,e.total_count),this.selectedChatId=r}}catch(r){console.warn("刷新对话列表失败:",r)}}else console.error("消息发送失败:",a.message),this.toast.error(a.message||"发送消息失败")}catch(r){console.error("发送消息异常:",r),this.toast.error("发送消息失败，请检查网络连接")}finally{this.isLoading=!1,console.log("消息发送流程结束")}},handleQuickStart(e){this.inputMessage=e,this.$nextTick(()=>{this.sendMessage(e)})},copyMessage(e){navigator.clipboard.writeText(e).then(()=>{this.toast.success("消息已复制到剪贴板")}).catch(()=>{this.toast.error("复制失败")})},regenerateMessage(e){this.toast.info("重新生成功能开发中")},async handleLoginSuccess(e){this.isLoggedIn=!0,this.userInfo={...e,plan:"个人版"},localStorage.setItem("userInfo",JSON.stringify(this.userInfo)),this.toast.success("登录成功"),await this.loadUserChats()},handleLogout(){this.recentChats=[],this.currentMessages=[],this.messagesCache={},this.selectedChatId=null,this.isLoggedIn=!1,this.userInfo={username:"",email:"",avatar:"",plan:"个人版"},this.showUserDropdown=!1,localStorage.removeItem("userInfo"),Object.keys(localStorage).forEach(e=>{e.startsWith("tempChats_")&&localStorage.removeItem(e)}),this.toast.info("已退出登录")},toggleTheme(){this.isDarkMode=!this.isDarkMode,localStorage.setItem("theme",this.isDarkMode?"dark":"light")},showSettings(){this.toast.info("设置功能开发中")},showHelp(){this.toast.info("帮助与反馈功能开发中")},uploadFile(){this.toast.info("文件上传功能开发中")},setupKeyboardShortcuts(){const e=e=>{(e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),this.newChat()),(e.ctrlKey||e.metaKey)&&","===e.key&&(e.preventDefault(),this.showSettings()),(e.ctrlKey||e.metaKey)&&"l"===e.key&&(e.preventDefault(),this.toggleTheme())};document.addEventListener("keydown",e),this.$options.beforeUnmount=()=>{document.removeEventListener("keydown",e)}}}},[["render",function(e,t,s,o,a,c){const d=w("Toast"),u=w("LoginModal"),h=w("Sidebar"),g=w("ChatArea");return r(),n("div",{class:l(["font-inter h-screen flex flex-col overflow-hidden",{dark:a.isDarkMode,"bg-light text-dark":!a.isDarkMode,"bg-dark-bg text-light":a.isDarkMode}])},[v(d,{ref:"toastRef"},null,512),v(u,{"show-login-modal":a.showLoginModal,onCloseModal:t[0]||(t[0]=e=>a.showLoginModal=!1),onLoginSuccess:c.handleLoginSuccess,onShowSuccess:o.toast.success,onShowError:o.toast.error},null,8,["show-login-modal","onLoginSuccess","onShowSuccess","onShowError"]),i("div",Ns,[v(h,{"is-sidebar-collapsed":a.isSidebarCollapsed,"is-logged-in":a.isLoggedIn,"user-info":a.userInfo,"show-user-dropdown":a.showUserDropdown,"is-dark-mode":a.isDarkMode,"recent-chats":a.recentChats,"selected-chat-id":a.selectedChatId,pagination:a.pagination,onToggleSidebar:c.toggleSidebar,onNewChat:c.newChat,onSelectChat:c.selectChat,onDeleteChat:c.deleteChat,onOpenLoginModal:t[1]||(t[1]=e=>a.showLoginModal=!0),onToggleUserDropdown:c.toggleUserDropdown,onShowSettings:c.showSettings,onShowHelp:c.showHelp,onToggleTheme:c.toggleTheme,onLogout:c.handleLogout,onRefreshChats:c.refreshUserChats,onLoadMoreChats:c.loadMoreChats},null,8,["is-sidebar-collapsed","is-logged-in","user-info","show-user-dropdown","is-dark-mode","recent-chats","selected-chat-id","pagination","onToggleSidebar","onNewChat","onSelectChat","onDeleteChat","onToggleUserDropdown","onShowSettings","onShowHelp","onToggleTheme","onLogout","onRefreshChats","onLoadMoreChats"]),v(g,{"current-chat-id":a.selectedChatId,messages:a.currentMessages,"is-loading":a.isLoading,"input-message":a.inputMessage,"user-info":a.userInfo,"is-dark-mode":a.isDarkMode,"is-logged-in":a.isLoggedIn,onToggleSidebar:c.toggleSidebar,onToggleTheme:c.toggleTheme,onShowSettings:c.showSettings,onShowHelp:c.showHelp,onQuickStart:c.handleQuickStart,onSendMessage:c.sendMessage,onCopyMessage:c.copyMessage,onRegenerateMessage:c.regenerateMessage,onClearInput:t[2]||(t[2]=e=>a.inputMessage=""),onUploadFile:c.uploadFile,"onUpdate:inputMessage":t[3]||(t[3]=e=>a.inputMessage=e),onShowLogin:t[4]||(t[4]=e=>a.showLoginModal=!0)},null,8,["current-chat-id","messages","is-loading","input-message","user-info","is-dark-mode","is-logged-in","onToggleSidebar","onToggleTheme","onShowSettings","onShowHelp","onQuickStart","onSendMessage","onCopyMessage","onRegenerateMessage","onUploadFile"])])],2)}],["__scopeId","data-v-709051e3"]])).mount("#app");
